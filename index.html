<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Starter Site — Video hero + full-screen video + order form</title>

  <!--
    IMPORTANT: This single-file starter is intended to be dropped into the root of a
    GitHub Pages repo (or any static host). Put your video files in a folder
    called `assets/` (e.g. `assets/hero.mp4` and `assets/feature.mp4`) OR set the
    <source> src attributes to point to external URLs.

    READ THE JS COMMENTS near the top of the script for how to wire Formspree
    (or EmailJS) so your form submissions get sent to your email.
  -->

  <style>
    /* ------------------ Basic layout & reset ------------------ */
    :root{
      --bg: #0f172a;
      --glass: rgba(255,255,255,0.06);
      --accent: #64ffda;
      --maxWidth: 1100px;
    }
    *{box-sizing: border-box}
    html,body{height:100%;margin:0;font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, 'Helvetica Neue', Arial; background:var(--bg); color:#fff}
    a{color:var(--accent)}

    /* ------------------ HERO (top) - background video that covers the screen ------------------ */
    .hero{
      position:relative;
      min-height:100vh; /* full viewport height */
      overflow:hidden;
      display:flex;
      align-items:center;
      justify-content:center;
      text-align:center;
    }
    /* the video is positioned absolutely and set to cover like a CSS background */
    .hero video{
      position:absolute;
      top:50%;left:50%;
      width:auto;height:100%;
      min-width:100%;min-height:100%;
      transform:translate(-50%,-50%);
      object-fit:cover; /* important so it fills the area */
      z-index:0;
      filter:brightness(.55);
    }
    /* content that sits on top of the hero video */
    .hero .content{
      position:relative; z-index:2; padding:2rem; max-width:var(--maxWidth);
      backdrop-filter: blur(2px);
    }
    .hero h1{font-size:clamp(28px,5vw,56px); margin:0 0 .5rem}
    .hero p{margin:0 0 1.5rem; opacity:.9}

    /* small admin area UI for uploading local files during development */
    .admin-upload{position:fixed; right:12px; top:12px; z-index:999; background:var(--glass); padding:.4rem .6rem; border-radius:8px; font-size:13px}
    .admin-upload input{display:none} /* hide the raw file input, we style the label */

    /* ------------------ Full-screen feature video (stacked below hero) ------------------ */
    .feature-video{
      min-height:100vh; /* also full viewport height */
      display:flex; align-items:center; justify-content:center; position:relative; overflow:hidden;
      background:#000; /* fallback */
    }
    .feature-video video{
      width:100%; height:100%; object-fit:cover; /* cover the viewport */
    }

    /* ------------------ Order form area ------------------ */
    .order-section{padding:4rem 1rem; display:flex; justify-content:center; background:linear-gradient(180deg, rgba(0,0,0,0.3), rgba(0,0,0,0.6));}
    .order-card{width:100%; max-width:840px; background:rgba(255,255,255,0.03); padding:2rem; border-radius:12px; box-shadow:0 6px 30px rgba(0,0,0,0.6)}
    .order-card h2{margin-top:0}
    .field{display:flex; gap:12px; margin-bottom:12px}
    .field input, .field textarea, .field select{flex:1; padding:.8rem; border-radius:8px; border:1px solid rgba(255,255,255,0.08); background:transparent; color:inherit}
    .grid-2{display:grid; grid-template-columns:1fr 1fr; gap:12px}
    .btn{display:inline-block; background:var(--accent); color:#001; border-radius:999px; padding:.8rem 1.1rem; font-weight:600; border:none; cursor:pointer}

    /* message area */
    #formMessage{margin-top:12px; padding:10px; border-radius:8px; display:none}

    /* small screens adjustments */
    @media (max-width:700px){
      .grid-2{grid-template-columns:1fr}
      .hero{align-items:flex-end;padding-bottom:6rem}
    }
  </style>
</head>
<body>

  <!-- HERO SECTION -->
  <section class="hero" id="hero">
    <!--
      heroVideo: Default background for the top section. Replace the <source>
      src attribute with your file in assets/hero.mp4 or use a remote URL.
      Note: autoplay on mobile requires the video to be muted and playsinline.
    -->
    <video id="heroVideo" autoplay muted loop playsinline poster="assets/hero-poster.jpg">
      <source src="assets/hero.mp4" type="video/mp4">
      <!-- GIFs are not supported inside <video> tags. If you want to use a GIF
           you can either convert it to MP4 (best) or use an <img> fallback. -->
      Sorry — your browser does not support embedded videos.
    </video>

    <!-- Visual content on top of the background video -->
    <div class="content">
      <h1>Printable3D</h1>
      <p>Replace <code>assets/hero.mp4</code> with your video or use the upload button (dev only).</p>
      <p><a href="#order">Go to order form</a></p>
    </div>

    <!-- Small admin control to allow local upload and preview (development only). 
         This will NOT upload the file to your server — it only changes the video
         element in the visitor's browser. Use it while developing locally. -->
    <label class="admin-upload" title="Upload a local video (dev only)">
      Upload hero
      <input id="heroUpload" type="file" accept="video/*,image/gif" />
    </label>
  </section>

  <!-- FEATURE VIDEO (full-screen stacked under hero) -->
  <section class="feature-video" id="featureVideoSection">
    <!-- We allow controls here; change to autoplay if you prefer autoplay behavior -->
    <video id="featureVideo" muted loop playsinline>
      <source src="assets/feature.mp4" type="video/mp4">
      Your browser does not support the feature video.
    </video>

    <!-- admin upload for the feature video (dev only) -->
    <label class="admin-upload" style="top:56px; right:12px;">Upload feature
      <input id="featureUpload" type="file" accept="video/*,image/gif" />
    </label>
  </section>

  <!-- ORDER / QUESTIONNAIRE FORM -->
  <section class="order-section" id="order">
    <div class="order-card">
      <h2>Order form / Questionnaire</h2>
      <p>Replace the <code>action</code> URL below with your Formspree endpoint or
         wire EmailJS if you prefer client-side email sending. Instructions are
         in the JS comments before the submit handler.</p>

      <!--
        FORM BACKEND NOTE:
        1) Formspree (https://formspree.io) — easiest for static sites. Create a
           free account, make a form, then paste the form endpoint into the
           `action` attribute. Example: action="https://formspree.io/f/xyzabc"

        2) EmailJS (https://www.emailjs.com) — lets you send from client-side
           using their SDK and your own email provider settings; requires a free
           account and an API key.

        Keep the method as POST. We use a JS fetch so the page doesn't fully reload.
      -->

      <form id="orderForm" action="https://formspree.io/f/yourFormId" method="POST">
        <div class="grid-2">
          <div class="field"><input name="name" type="text" placeholder="Full name" required></div>
          <div class="field"><input name="email" type="email" placeholder="Email address" required></div>
        </div>

        <div class="grid-2">
          <div class="field"><input name="phone" type="tel" placeholder="Phone (optional)"></div>
          <div class="field"><input name="company" type="text" placeholder="Company (optional)"></div>
        </div>

        <div class="field"><input name="product" type="text" placeholder="Product / Service you're ordering" required></div>

        <div class="field"><textarea name="details" rows="5" placeholder="Order details / Questionnaire answers" required></textarea></div>

        <!-- If you want the form to include the page URL or other metadata, you can
             add hidden inputs here. -->
        <input type="hidden" name="_source" value="starter-site">

        <div style="display:flex; gap:12px; align-items:center">
          <button class="btn" type="submit">Submit order</button>
          <div id="formMessage" aria-live="polite"></div>
        </div>
      </form>

      <hr style="margin-top:1.5rem; opacity:.08">
      <p style="font-size:13px; opacity:.8; margin:0">Tip: To test locally run <code>python -m http.server 8000</code> from the folder
        and open <code>http://localhost:8000</code>. Browsers sometimes block video autoplay on <code>file://</code> pages.</p>
    </div>
  </section>

  <script>
    /* ------------------ Small utilities for video previewing & form handling ------------------ */

    // === ADMIN UPLOADS (DEVELOPMENT ONLY) ===
    // These let you pick a local file and immediately preview it in the hero/feature
    // videos. They DO NOT upload the file to your hosting provider — they only
    // change the video element source in the current browser session.
    const heroUpload = document.getElementById('heroUpload');
    const heroVideo = document.getElementById('heroVideo');
    const featureUpload = document.getElementById('featureUpload');
    const featureVideo = document.getElementById('featureVideo');

    function attachPreviewUpload(inputEl, videoEl){
      if(!inputEl) return;
      inputEl.addEventListener('change', (ev)=>{
        const file = ev.target.files && ev.target.files[0];
        if(!file) return;
        // If the user selects a GIF, we convert to an object URL and show it in
        // an <img> fallback by switching the video element out — but to keep this
        // starter simple we first try to put it in the video tag. Many browsers
        // don't play GIF inside <video>, so for GIFs you may want to convert to mp4.

        const url = URL.createObjectURL(file);
        // replace the <source> children so the video picks up the new blob URL
        while(videoEl.firstChild) videoEl.removeChild(videoEl.firstChild);
        const s = document.createElement('source');
        s.src = url;
        // try guessing mime-type from file
        s.type = file.type || 'video/mp4';
        videoEl.appendChild(s);
        videoEl.load();
        // muted autoplay is required for autoplay on most mobile browsers
        videoEl.muted = true;
        videoEl.play().catch(()=>{
          // ignore play errors (some browsers require a user gesture)
        });
      });
    }
    attachPreviewUpload(heroUpload, heroVideo);
    attachPreviewUpload(featureUpload, featureVideo);

    // === FORM SUBMISSION (works with Formspree) ===
    // IMPORTANT: Replace the `action` attribute of the form with your Formspree
    // endpoint (you get that on https://formspree.io when you create a form).
    // Example action: https://formspree.io/f/xyzzazbq
    // If you prefer EmailJS, remove this handler and follow EmailJS docs to send
    // directly from client-side (requires their SDK + keys).

    const orderForm = document.getElementById('orderForm');
    const formMessage = document.getElementById('formMessage');

    orderForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      formMessage.style.display = 'none';

      // Build a FormData object from the form
      const formData = new FormData(orderForm);

      try {
        const resp = await fetch(orderForm.action, {
          method: 'POST',
          body: formData,
          headers: {
            'Accept': 'application/json'
          }
        });

        if (resp.ok) {
          formMessage.style.display = 'block';
          formMessage.style.background = 'linear-gradient(90deg, rgba(100,255,218,0.12), rgba(100,255,218,0.06))';
          formMessage.style.color = '#bfffe9';
          formMessage.textContent = 'Thanks — your form was submitted successfully.';
          orderForm.reset();
        } else {
          const data = await resp.json().catch(()=>({}));
          throw new Error((data && data.error) || 'Submission failed');
        }
      } catch (err) {
        formMessage.style.display = 'block';
        formMessage.style.background = 'linear-gradient(90deg, rgba(255,150,150,0.08), rgba(255,150,150,0.04))';
        formMessage.style.color = '#ffd4d4';
        formMessage.textContent = 'Error submitting form — please check the console and your form endpoint.';
        console.error('Form submission error:', err);
      }
    });

    // === Small accessibility improvement: pause autoplay videos when page is hidden ===
    document.addEventListener('visibilitychange', ()=>{
      const vids = document.querySelectorAll('video');
      vids.forEach(v => {
        if (document.hidden) {
          v.pause();
        } else {
          // only try to play if muted (to avoid autoplay policy issues)
          if (v.muted) v.play().catch(()=>{});
        }
      });
    });
  </script>
</body>
</html>
